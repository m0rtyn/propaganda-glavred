const earningsBullshits = [
  /\B[??]????\W{2,4} +?????\W{1,3}\B/,
  /\B??????\W{1,4}??? ??\W{2,7}\B/,
  /\B[??]???? ??????\B/,
  /\B[??]?????\W{0,3} ["?]?? ????["?]\B/,
  /\B?????\W{2,6}?[??]\B/,
  /\B[??] ????? ?????\B/,
  /\B????? +\d{1,3} +(?????|???)\D{0,3} ? (????|??????)\B/,
  /\B[??]???\W\B/,
  /\B[??]??????\W{1,3}\B/,
  /\B[??]? +????\B/,
  /\B???????\W{0,2}\B/,
  /\B[??]?????\W{1,3} ???????\B/,
  /\B[??]????\W{1,3} ? ???????\B/,
  /\B????? +????\W{1,3}\B/,
  /\B????\W{1,2} +\W+ +? +?????\B/,
  /\B?????\W{2,3} +????????\W{0,2}\B/,
  /\B??? +????? +????????\B/,
  /\B???? +????? +??????????\B/,
  /\B?????? +??????????\B/,
  /\B???????? +?[??] +???\B/,
  /\B??????\W{2,3} +?????\W?\B/,
  /\B??????\W{2,3} +??????\W\B/,
  /\B?? +????[??]\W{3,5}\B/,
  /\B?? +???\W{2,3} +????\W{2,3}\B/,
  /\B????? +?? +?????????\B/,
  /\B????????????\W{2,3} +?????\B/,
  /\B???? +? +????? +????\B/,
  /\B??[??], +? +?[??]? +(??|??) +??????\W\B/,
  /\B?????\W{1,4} +?????\B/,
  /\B?????\W{2,4} +??????\W\B/,
];

const politicalBullshits = [
  /\B????\W{0,3}\B/,
  /\B????\W{1,3}\B/,
  /\B???\W\W??[??]\B/,
  /\B????\W{0,3}\B/,
  /\B???\W{0,3}\B/,
  /\B????\W{0,3}\B/,
  /\B????????\W{0,3}\B/,
  /\B???\W{0,3}\B/,
  /\B???????\W{0,3}\B/,
  /\B?????\W{0,3}\B/,
  /\B????????\W{0,3}\B/,
  /\B?? +??????\B/,
  /\B????????\W{0,3}\B/,
  /\B??????\W{1,3}?[??]\B/,
  /\B????????\W{0,3}\B/,
  /\B??????????\W{0,3}\B/,
  /\B????????\W{0,3}\B/,
  /\B????????\W{0,3}\B/,
  /\B??????\W{0,3}\B/,
  /\B(??)????\W{2,6}\B/,
  /\B(??|?) +?????\W{0,3}\B/,
  /\B????\W{2,4}\B/,
  /\B???????\W{1,4}\B/,
  /\B?????\W{1,4}\B/,
  /\B????????\W{1,4}\B/,
  /\B????????\W{1,4}\B/,
  /\B????????\W{1,4}\B/,
  /\B????????\W{1,4}\B/,
  /\B????\W{1,4}?[??]\B/,
  /\B????\W{1,4}\B/,
  /\B?????????????\B/,
  /\B? +?? +????? +???\B/,
  /\B?????????[??]\B/,
  /\B(??|??????) +(?? +???)? +????\W{2,4}\B/,
  /\B(??|??????) +(?? +???)? +?????\W{1,3}\B/,
  /\B??????\W{1,4}?[??] +? +???????\B/,
  /\B??? +?????? +?????????[??]\B/,
  /\B??\W{1,4} +?????\W{2,4}\B/,
  /\B??????????\W{2,4}\B/,
  /\B? +???? +?? +????\W{1,4}\B/,
  /\B???????\W{1,4} +?????\B/,
  /\B?????\W{1,4}\B/,
  /\B??????????????\W{1,4}\B/,
  /\B???????????\W{1,4}\B/,
  /\B????\W{1,4}\B/,
  /\B????????\W{0,4}\B/,
  /\B?????\W{1,4}\B/,
  /\B????\W{1,4}\B/,
  /\B?????????\W{1,4}\B/,
  /\B(?|??) +?????\W{0,4}\B/,
  /\B??????\W{0,4}\B/,
  /\B????\W{0,4}\B/,
  /\B???????\W{1,4}\B/,
  /\B??? +????\W{1,4}\B/,
  /\B?????????\W{1,4}\B/,
  /\B?????? +?????\B/,
  /\B????????? +?????\B/,
  /\B??????????\W{0,3} +????????\B/,
  /\B?? +??? +??????\B/,
  /\B?????\W{0,2}\B/,
  /\B???????\W{1,4}\B/,
  /\B????????\W{2,4}\B/,
  /\B??????\W{0,4}\B/,
  /\B??? +??????? +????\B/,
  /\B??? +????????\W{0,4}\B/,
  /\B??? \B/,
  /\B??????\B/,
  /\B??????-????????\B/,
  /\B????? +?????\B/,
  /\B????????\B/,
  /\B??????? +?????????\B/,
  /\B?????\W{2,4}\B/,
  /\B?????\W{1,4}\B/,
  /\B?????\W{2,4}\B/,
  /\B?????? +?????\B/,
  /\B??? +??????? +(\W{5,15} )??????\B/,
  /\B??????\W{2,4}\B/,
  /\B???\B/,
  /\B??????\B/,
  /\B???????\W{1,4} +??????\B/,
  /\B???????\B/,
  /\B?????????\W{2,4}\B/,
  /\B?? +??? +??????\B/,
  /\B?????????? +??????-????\B/,
  /\B????\W{1,3}-???? +??????????\W{0,4}\B/,
  /\B???????\W{2,4} +???\W{1,3}\B/,
  /\B??????????\W{1,4}\B/,
  /\B??????\W{1,4}\B/,
  /\B??????\W{0,4}\B/,
  /\B???????\W{1,4}\B/,
  /\B???????? +(\W{5,15} )?????????\B/,
  /\B??-????????\B/,
  /\B??? +???? +???????\B/,
  /\B????????\B/,
];

const start = () => {
  const style = document.createElement("style");

  style.innerHTML = ` 
    .highlight {
          background: #4CFF00;
        }
  `;

  document.head.appendChild(style);

  const highlightText = (regExp, originalHtml) => {
    const newHtml = originalHtml.replace(
      new RegExp(regExp, "gi"),
      (match) => {
        return '<span class="highlight">' + match + "</span>";
      }
    );

    return newHtml;
  }

  const highlightPropaganda = (tagName) => {
    const tags = document.getElementsByTagName(tagName);

    Object.values(tags).forEach((tag) => {
      for (var i = 0; i < earningsBullshits.length; i++) {
        const text = tag.innerHTML;
        tag.innerHTML = highlightText(earningsBullshits[i], text);
      }

      for (let i = 0; i < politicalBullshits.length; i++) {
        const text = tag.innerHTML;
        tag.innerHTML = highlightText(politicalBullshits[i], text);
      }
    });
  };

  highlightPropaganda("p");
};

if (document.readyState === "interactive") {
  start();
} else {
  document.addEventListener("DOMContentLoaded", start);
}
